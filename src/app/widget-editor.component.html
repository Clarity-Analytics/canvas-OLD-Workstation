<!--Widget Editor-->
<div
    class="widgetEditor"
    *ngIf="displayEditWidget"
    >

    <div
        class="editorHeading"
        >
        Widget Editor
    </div>

    <form
        [formGroup]="identificationForm"
        >

        <!--Content Panel Header-->
        <div
            class="PanelHeading"
            >
            Content

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="contentPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="contentPanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!contentPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="contentPanelIsOpen=true"
                >
            </button>
        </div>

        <!--Content Panel Area-->
        <div
            class="panelArea"
            *ngIf="contentPanelIsOpen"
            >

            <!--showText-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Show Text:
                </span>
                <p-checkbox
                    class="pcheckbox"
                    pTooltip="Check to show Text in the container"
                    formControlName="showWidgetText"
                    [(ngModel)]="showWidgetText"
                    binary="true"
                    >
                </p-checkbox>
            </div>

            <!--showGraph-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Show Graph:
                </span>
                <p-checkbox
                    class="pcheckbox"
                    pTooltip="Check to show Text in the container"
                    formControlName="showWidgetGraph"
                    [(ngModel)]="showWidgetGraph"
                    binary="true"
                    >
                </p-checkbox>
            </div>

            <!--showTable-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Show Table:
                </span>
                <p-checkbox
                    class="pcheckbox"
                    pTooltip="Check to show Text in the container"
                    formControlName="showWidgetTable"
                    [(ngModel)]="showWidgetTable"
                    binary="true"
                    >
                </p-checkbox>
            </div>

            <!--showImage-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Show Image:
                </span>
                <p-checkbox
                    class="pcheckbox"
                    pTooltip="Check to show Text in the container"
                    formControlName="showWidgetImage"
                    [(ngModel)]="showWidgetImage"
                    binary="true"
                    >
                </p-checkbox>
            </div>

        </div>


        <!--ID Panel Header-->
        <div
            class="PanelHeading"
            >
            Identification

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="idPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="idPanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!idPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="idPanelIsOpen=true"
                >
            </button>
        </div>

        <!--Id Panel Area-->
        <div
            class="panelArea"
            *ngIf="idPanelIsOpen"
            >

            <!--Dashboard Name-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Dashboard :
                </span>
                <p-dropdown
                    [options]="dashboardDropDown"
                    [(ngModel)]="selectedDashboard"
                    [style]="{
                            'autofocus':'true',
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-2px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                            }"
                    placeholder="Required"
                    formControlName="dashboardName"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Tab Name-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    TabName :
                </span>
                <p-dropdown
                    [options]="dashboardTabsDropDown"
                    [(ngModel)]="selectedDashboardTab"
                    [style]="{
                            'autofocus':'true',
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-2px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                            }"
                    placeholder="Required"
                    formControlName="dashboardTabName"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Title-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Title :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="widgetTitle"
                    placeholder="Required"
                    pTooltip="Short Title to be displayed at the top of the container"
                    />
            </div>

            <!--Code-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Code :
                </span>
                <input pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetCode"
                    placeholder="Required"
                    pTooltip="Short Widget Code"
                    />
            </div>

            <!--Name-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Name :
                </span>
                <input pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetName"
                    placeholder="Required"
                    pTooltip="Descriptive Name of the Widget"
                    />
            </div>

            <!--Description-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Description :
                </span>
                <input pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetDescription"
                    placeholder="Required"
                    pTooltip="Detailed description of the Widget"
                    />
            </div>
        </div>


        <!--Behaviour Panel Header-->
        <div
            class="PanelHeading"
            >
            Behaviour

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="behaviourPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="behaviourPanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!behaviourPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="behaviourPanelIsOpen=true"
                >
            </button>
        </div>

        <!--Behaviour Panel Area-->
        <div
            class="panelArea"
            *ngIf="behaviourPanelIsOpen"
            >

            <!--Default Export File Type-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Export F-Type:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetDefaultExportFileType"
                    placeholder="(Optional)"
                    pTooltip="Default File Type on Export"
                    />
            </div>

            <!--Hyperlink Tab Number-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Hyper-TabNr:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetHyperLinkTabNr"
                    placeholder="(Optional)"
                    pTooltip="Tab Nr to which this Widget hyperlinks"
                    />
            </div>

            <!--Hyperlink Widget ID-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Hyper-Widget:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetHyperLinkWidgetID"
                    placeholder="(Optional)"
                    pTooltip="Widget ID to which this Widget hyperlinks"
                    />
            </div>

            <!--Refresh Mode-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Refresh Mode:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetRefreshMode"
                    placeholder="(Optional)"
                    pTooltip="Refresh Mode of Widget: Manual, OnOpen, Repeatedly"
                    />
            </div>

            <!--Refresh Frequency-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Refresh Freq:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetRefreshFrequency"
                    placeholder="(Optional)"
                    pTooltip="Refresh Frequency (if Refresh Mode is Repeatedly)"
                    />
            </div>

            <!--Password-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Password:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    formControlName="widgetPassword"
                    placeholder="(Optional)"
                    pTooltip="Password to show Widget content"
                    />
            </div>

            <!--Number Liked-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Nr Liked:
                </span>
                <input
                    pInputText
                    style="
                             float: right;
                             margin-bottom: 3px;
                             margin-right: 5px;
                             margin-top: 0px;
                             padding: 0;
                             width: 200px;
                          "
                    type="text"
                    readonly
                    formControlName="NrwidgetLiked"
                    pTooltip="Nr of users that Liked this Widget (info)"
                    />
            </div>
        </div>


        <!--Text Panel Header-->
        <div
            class="PanelHeading"
            *ngIf="showWidgetText"
            >
            Text

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="textPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="textPanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!textPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="textPanelIsOpen=true"
                >
            </button>
        </div>

        <!--Text Panel Area-->
        <div
            class="panelArea"
            *ngIf="showWidgetText   &&   textPanelIsOpen"
            >

            <!--textText-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="textText"
                    placeholder="Required"
                    pTooltip="Text to show in the container (may contain HTML and ##today##)"
                    />
            </div>

            <!--Text Background Color-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Background:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextBackground"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="chartColor"
                    formControlName="textBackgroundColor"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Text Border-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Border:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextBorder"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="borderDropdown"
                    formControlName="textBorder"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Text Color-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Color:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextColor"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="chartColor"
                    formControlName="textColor"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Font Size-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Font Size:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextFontSize"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="fontSizeDropdowns"
                    formControlName="textFontSize"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Font Weight-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Font Weight:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextFontWeight"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="fontWeightDropdowns"
                    formControlName="textFontWeight"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--textHeight-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Height :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="textHeight"
                    placeholder="Required"
                    pTooltip="Height of text to be shown in px (16px = 1em = 1 line)"
                    />
            </div>

            <!--textLeft-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Left :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="textLeft"
                    placeholder="Required"
                    pTooltip="Left of text box in px"
                    />
            </div>

            <!--Text Margin-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Margin:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextMargin"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="textMarginDropdowns"
                    formControlName="textMargin"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Text Padding-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Padding:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextPadding"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="textPaddingDropdowns"
                    formControlName="textPadding"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Text Position-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Position:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextPosition"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="textPositionDropdowns"
                    formControlName="textPosition"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--Text Alignment (horisontal)-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Align:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTextAlign"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="textAlignDropdowns"
                    formControlName="textTextAlign"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--textTop-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Top :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="textTop"
                    placeholder="Required"
                    pTooltip="Top of text to be shown in px (16px = 1em = 1 line)"
                    />
            </div>

            <!--textWidth-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Width :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="textWidth"
                    placeholder="Required"
                    pTooltip="Width of text to be shown in px (16px = 1em = 1 line)"
                    />
            </div>

        </div>


        <!--Data Panel Header-->
        <div
            class="PanelHeading"
            >
            Data

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="dataPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="dataPanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!dataPanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="dataPanelIsOpen=true"
                >
            </button>
        </div>

        <!--Data Panel Area-->
        <div
            class="panelArea"
            *ngIf="dataPanelIsOpen"
            >

            <!--Report selection-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    ReportName :
                </span>
                <p-dropdown
                    [options]="reportsDropDown"
                    [(ngModel)]="selectedReport"
                    [style]="{
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-4px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                             }"
                    placeholder="Required"
                    formControlName="widgetReportName"
                    filter="true"
                    (onChange)="onChangeLoadReportRelatedInfo($event)"
                    >
                </p-dropdown>
            </div>      <!--END Report selection-->

            <!--Report Paramters (optional)-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Rpt Params:
                </span>
                <input
                    pInputText
                    style="
                                float: right;
                                margin-bottom: 3px;
                                margin-right: 5px;
                                margin-top: 0px;
                                padding: 0;
                                width: 200px;
                             "
                    type="text"
                    formControlName="widgetReportParameters"
                    placeholder="(Optional)"
                    pTooltip="Optional Report Parameters"
                    />
            </div>      <!--END Report Paramters (optional)-->

            <!--Indicated number of rows to extract (LIMIT = n, or TOP = n in SQL)-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Limit Rows:
                </span>
                <input pInputText
                    style="
                                float: right;
                                margin-bottom: 3px;
                                margin-right: 5px;
                                margin-top: 0px;
                                padding: 0;
                                width: 200px;
                             "
                type="text"
                formControlName="widgetShowLimitedRows"
                placeholder="(Optional)"
                pTooltip="Indicate the (limited) number of rows to show from the data"
                />
            </div>      <!--END Indicated number of rows to extract (LIMIT = n, or TOP = n in SQL)-->

            <!--Indicate if extra row must be added with aggregate of the Rest -->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Rest Row:
                </span>
                <input pInputText
                    style="
                                float: right;
                                margin-bottom: 3px;
                                margin-right: 5px;
                                margin-top: 0px;
                                padding: 0;
                                width: 200px;
                             "
                type="text"
                formControlName="widgetAddRestRow"
                placeholder="(Optional)"
                pTooltip="Check to add a Rest Row (aggregate of the rows above the Limited Rows)"
                />
            </div>      <!--END Indicate if extra row must be added with aggregate of the Rest -->
        </div>


        <!--Graph Panel Header-->
        <div
            class="PanelHeading"
            *ngIf="showWidgetGraph"
            >
            Graph

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="widgetTypePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="widgetTypePanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!widgetTypePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="widgetTypePanelIsOpen=true"
                >
            </button>
        </div>

        <!--Graph Panel Area-->
        <div
            class="panelArea"
            *ngIf="showWidgetGraph   &&   widgetTypePanelIsOpen"
            >

            <!--Report selection-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Widget Type :
                </span>

                <p-dropdown
                    [options]="widgetCreationDropDown"
                    [(ngModel)]="selectedWidgetCreation"
                    [style]="{
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-12px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                             }"
                    placeholder="Required"
                    formControlName="widgetType"
                    pTooltip=""
                    dataKey="BarChart"
                    (onChange)="loadWidgetTemplateFields()"
                    >
                </p-dropdown>
            </div>

            <!--The Rest of the DOM depends on what was selected above-->
            <div *ngIf="selectedWidgetCreation">

                <!--ngIf since selectedWidgetCreation undefined at start-->
                <div [ngSwitch]="this.selectedWidgetCreation['name']">

                    <!--WidgetSets-->
                    <div *ngSwitchCase="'WidgetSet'">
                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Widget Sets:
                            </span>
                            <p-dropdown
                                [options]="reportWidgetSetsDropDown"
                                [style]="{
                                            'background-color':'538cc6',
                                            'border':'1px solid lightgray',
                                            'border-radius':'2px',
                                            'float':'right',
                                            'font-size':'0.85em',
                                            'margin':'-6px 5px 0 0',
                                            'padding':'0',
                                            'width':'200px'
                                        }"
                                filter="true"
                                formControlName="widgetReportWidgetSet"
                                (onChange)="changeWidgetSet($event)"
                                >
                            </p-dropdown>
                        </div>
                    </div>        <!--END WidgetSets-->

                    <!--BarChar fields-->
                    <div *ngSwitchCase="'BarChart'" >

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Height :
                            </span>
                            <input pInputText
                                style="
                                            float: right;
                                            margin-bottom: 3px;
                                            margin-right: 5px;
                                            margin-top: 0px;
                                            padding: 0;
                                            width: 200px;
                                        "
                                type="text"
                                formControlName="vegaGraphHeight"
                                placeholder="Required"
                                pTooltip="Height of the graph, inside the container"
                                />
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Width :
                            </span>
                            <input pInputText
                                style="
                                            float: right;
                                            margin-bottom: 3px;
                                            margin-right: 5px;
                                            margin-top: 0px;
                                            padding: 0;
                                            width: 200px;
                                        "
                                type="text"
                                formControlName="vegaGraphWidth"
                                placeholder="Required"
                                pTooltip="Width of the graph, inside the container"
                                />
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Padding :
                            </span>
                            <input pInputText
                                style="
                                            float: right;
                                            margin-bottom: 3px;
                                            margin-right: 5px;
                                            margin-top: 0px;
                                            padding: 0;
                                            width: 200px;
                                        "
                                type="text"
                                formControlName="vegaGraphPadding"
                                placeholder="Required"
                                pTooltip="Padding of the graph, inside the container"
                                />
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                X Axis :
                            </span>
                            <p-dropdown
                                [options]="reportFieldsDropDown"
                                [(ngModel)]="selectedVegaXcolumn"
                                [style]="{
                                            'background-color':'538cc6',
                                            'border':'1px solid lightgray',
                                            'border-radius':'2px',
                                            'float':'right',
                                            'font-size':'0.85em',
                                            'margin':'-2px 5px 0 0',
                                            'padding':'0',
                                            'width':'200px'
                                        }"
                                [pTooltip]="reportWidgetSetDropToolTip"
                                filter="true"
                                formControlName="vegaXcolumn"
                                placeholder="Required"
                                >
                            </p-dropdown>
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Y Axis :
                            </span>
                            <p-dropdown
                                [options]="reportFieldsDropDown"
                                [(ngModel)]="selectedVegaYcolumn"
                                [style]="{
                                            'background-color':'538cc6',
                                            'border':'1px solid lightgray',
                                            'border-radius':'2px',
                                            'float':'right',
                                            'font-size':'0.85em',
                                            'margin':'-2px 5px 0 0',
                                            'padding':'0',
                                            'width':'200px'
                                        }"
                                [pTooltip]="reportWidgetSetDropToolTip"
                                filter="true"
                                placeholder="Required"
                                formControlName="vegaYcolumn"
                                >
                            </p-dropdown>
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Fill Color:
                            </span>
                            <p-dropdown
                                [options]="chartColor"
                                [(ngModel)]="selectedVegaFillColor"
                                [style]="{
                                            'background-color':'538cc6',
                                            'border':'1px solid lightgray',
                                            'border-radius':'2px',
                                            'float':'right',
                                            'font-size':'0.85em',
                                            'margin':'-2px 5px 0 0',
                                            'padding':'0',
                                            'width':'200px'
                                        }"
                                [pTooltip]=""
                                filter="true"
                                formControlName="vegaFillColor"
                                placeholder="(Optional)"
                                >
                            </p-dropdown>
                        </div>

                        <div
                            class="panelLine"
                            >
                            <span
                                class="panelLineLabel"
                                >
                                Hover Color:
                            </span>
                            <p-dropdown
                                [options]="chartColor"
                                [(ngModel)]="selectedVegaHoverColor"
                                [style]="{
                                            'background-color':'538cc6',
                                            'border':'1px solid lightgray',
                                            'border-radius':'2px',
                                            'float':'right',
                                            'font-size':'0.85em',
                                            'margin':'-2px 5px 0 0',
                                            'padding':'0',
                                            'width':'200px'
                                        }"
                                [pTooltip]="reportWidgetSetDropToolTip"
                                filter="true"
                                formControlName="vegaHoverColor"
                                placeholder="(Optional)"
                                >
                            </p-dropdown>
                        </div>

                    </div>       <!--END BarChar fields-->

                    <!--PieChart-->
                    <div *ngSwitchCase="'PieChart'" >
                        PieChart
                    </div>      <!--END PieChart-->

                    <!--LineChart-->
                    <div *ngSwitchCase="'LineChart'">
                        LineChart
                    </div>      <!--END LineChart-->

                    <!--Custom-->
                    <div *ngSwitchCase="'Custom'">
                        Custom: Edit the Vega spec below ...
                    </div>      <!--END LineChart-->

                    <!--Default-->
                    <div *ngSwitchDefault           >
                        No widget creation option selected
                    </div>      <!--END Default-->

                </div>      <!--END ngSwitch-->
            </div>


            <!--Vega Panel Header-->
            <div
                class="PanelSubHeading"
                >
                Vega

                <!--Open/Close buttons-->
                <button
                    class="panelCaretButton"
                    *ngIf="vegaPanelIsOpen"
                    pButton
                    type="button"
                    icon="fa-caret-up"
                    tooltipPosition="right"
                    tooltipEvent="hover"
                    (click)="vegaPanelIsOpen=false"
                    >
                </button>
                <button
                    class="panelCaretButton"
                    *ngIf="!vegaPanelIsOpen"
                    pButton
                    type="button"
                    icon="fa-caret-down"
                    tooltipPosition="right"
                    tooltipEvent="hover"
                    (click)="vegaPanelIsOpen=true"
                    >
                </button>
            </div>

            <!--Vega Panel Area-->
            <div
                class="panelArea"
                *ngIf="vegaPanelIsOpen"
                >
                <div
                    *ngIf="isVegaSpecBad"
                    >
                    Vega spec is invalid
                </div>
                <div
                    *ngIf="!isVegaSpecBad"
                    >
                    Vega spec is Valid
                </div>

                <!--Vega-->
                <div
                    class="panelLine"
                    >
                    <span
                        class="panelLineLabel"
                        >
                        Custom Vega spec:
                    </span>
                    <p>
                    <p>Copy and paste using keyboard (Ctrl-C and Ctrl-V).  Note that the
                        specification must be validated before it can be used, by clicking
                        the button below.   Also, the spec can only be editted for Custom
                        specs.  No parameters can be added, and the data from the Report
                        will be inserted into the spec.  The spec area can be resized
                        with the draghandle (right bottom).
                    </p>
                    <textarea
                        pInputTextarea
                        class="widgetGraph"
                        formControlName="vegaSpec"
                        >
                    </textarea>
                    <button
                        class="panelButtonWithLabel"
                        pButton
                        type="button"
                        label="Validate"
                        icon="fa-question-circle"
                        pTooltip="Click to validate the Vega Spec"
                        tooltipPosition="right"
                        tooltipEvent="hover"
                        (click)="testVegaSpec()"
                        [disabled]="isNotCustomSpec"
                        >
                    </button>
                </div>

                <div #widget class="widgetGraph">
                </div>


            </div>

        </div>


        <!--Table Panel Header-->
        <div
            class="PanelHeading"
            *ngIf="showWidgetTable"
            >
            Table

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="tablePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="tablePanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!tablePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="tablePanelIsOpen=true"
                >
            </button>
        </div>

        <!--Table Panel Area-->
        <div
            class="panelArea"
            *ngIf="showWidgetTable   &&   tablePanelIsOpen"
            >

            <!--textText-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    HideHeader :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableHideHeader"
                    placeholder="Required"
                    pTooltip="True to include table headers (else false)"
                    />
            </div>

            <!--Text Background Color-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Text Color:
                </span>
                <p-dropdown
                    [(ngModel)]="selectedTableColor"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-12px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="chartColor"
                    formControlName="tableColor"
                    placeholder="(Optional)"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--tableCols-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Nr Cols :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableCols"
                    placeholder="Required"
                    pTooltip="Number of columns to show in the table"
                    />
            </div>

            <!--tableRows-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Nr Rows :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableRows"
                    placeholder="Required"
                    pTooltip="Number of rows to show in the table"
                    />
            </div>

            <!--tableHeight-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Height :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableHeight"
                    placeholder="Required"
                    pTooltip="Height of the full table in px (0 means no fixed height)"
                    />
            </div>

            <!--tableWidth-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Width :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableWidth"
                    placeholder="Required"
                    pTooltip="Width of the full table in px (0 means no fixed wdith)"
                    />
            </div>

            <!--tableLeft-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Left :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableLeft"
                    placeholder="Required"
                    pTooltip="Left of the table in px (0 means ignore)"
                    />
            </div>

            <!--tableTop-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Top :
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="tableTop"
                    placeholder="Required"
                    pTooltip="Top of the table in px (0 means ignore)"
                    />
            </div>
        </div>


        <!--Image Panel Header-->
        <div
            class="PanelHeading"
            *ngIf="showWidgetImage"
            >
            Image

            <!--Open/Close buttons-->
            <button
                class="panelCaretButton"
                *ngIf="imagePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-up"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="imagePanelIsOpen=false"
                >
            </button>
            <button
                class="panelCaretButton"
                *ngIf="!imagePanelIsOpen"
                pButton
                type="button"
                icon="fa-caret-down"
                tooltipPosition="right"
                tooltipEvent="hover"
                (click)="imagePanelIsOpen=true"
                >
            </button>
        </div>

        <!--Image Panel Area-->
        <div
            class="panelArea"
            *ngIf="showWidgetImage   &&   imagePanelIsOpen"
            >

            <!--imageAlt-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Alt:
                </span>
                <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="imageAlt"
                    placeholder="(Optional)"
                    pTooltip="Alt text to show if Image is not available"
                    />
            </div>

            <!--imageHeigt-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Height :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="imageHeigt"
                    placeholder="Required"
                    pTooltip="Height of Image in px (16px = 1em = 1 line)"
                    />
            </div>

            <!--imageLeft-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Left :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="imageLeft"
                    placeholder="Required"
                    pTooltip="Left of Image in px (16px = 1em = 1 line)"
                    />
            </div>

            <!--imageSource-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Source :
                </span>
                <p-dropdown
                    [(ngModel)]="selectedImageSrc"
                    [style]="
                        {
                            'background-color':'538cc6',
                            'border':'1px solid lightgray',
                            'border-radius':'2px',
                            'float':'right',
                            'font-size':'0.85em',
                            'margin':'-12px 5px 0 0',
                            'padding':'0',
                            'width':'200px'
                        }"
                    [options]="imageSourceDropdowns"
                    formControlName="imageSource"
                    placeholder="Required"
                    filter="true"
                    >
                </p-dropdown>
            </div>

            <!--imageTop-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Top :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="imageTop"
                    placeholder="Required"
                    pTooltip="Top of Image to be shown in px (16px = 1em = 1 line)"
                    />
            </div>

            <!--imageWidth-->
            <div
                class="panelLine"
                >
                <span
                    class="panelLineLabel"
                    >
                    Width :
                </span>
                 <input
                    pInputText
                    style="
                            float: right;
                            margin-bottom: 3px;
                            margin-right: 5px;
                            margin-top: 0px;
                            padding: 0;
                            width: 200px;
                          "
                    type="text"
                    formControlName="imageWidth"
                    placeholder="Required"
                    pTooltip="Width of Image to be shown in px (16px = 1em = 1 line)"
                    />
            </div>

        </div>

    </form>     <!--END Form in this Panel-->


    <!--Buttun Area contains Cancel / Submit-->
    <div
        class="panelButtonArea"
        >
        <button
            class="panelButtonWithLabel"
            pButton
            type="button"
            label="Cancel"
            icon="fa-undo"
            (click)="onClickCancel()"
            >
        </button>
        <button
            class="panelButtonWithLabel"
            pButton
            type="submit"
            label="Submit"
            icon="fa-refresh"
            (click)="onClickSubmit()"
            >
        </button>
    </div>

    <!--Errors-->
    <p
        class="iserror"
        *ngIf="formIsValid">
        {{ errorMessageOnForm }}
    </p>

</div>

